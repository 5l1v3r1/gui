<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="container-editor.css">
    <script type="text/montage-serialization">
    {
        "owner": {
            "properties": {
                "element": {"#": "owner"},
                "validationController": {"@": "validationController"},
                "inspector": {"@": "inspector"},
                "_nameComponent": {"@": "name"},
                "_commandComponent": {"@": "command"},
                "_volumesComponent": {"@": "volumes"},
                "_portsComponent": {"@": "ports"},
                "_environmentComponent": {"@": "environment"}
            },
            "bindings": {
                "interactive": {"<-": "@owner.object.interactive"},
                "object.names": {"<-": "@name.value.split(' ')"}
            }
        },

        "start": {
            "prototype": "blue-shark/ui/button.reel",
            "properties": {
                "element": {"#": "start"},
                "value": "Start"
            },
            "bindings": {
                "disabled": {"<-": "@owner.object.running"}
            }
        },

        "restart": {
            "prototype": "blue-shark/ui/button.reel",
            "properties": {
                "element": {"#": "restart"},
                "value": "Restart"
            },
            "bindings": {
                "disabled": {"<-": "!@start.disabled"}
            }
        },

        "stop": {
            "prototype": "blue-shark/ui/button.reel",
            "properties": {
                "element": {"#": "stop"},
                "value": "Stop"
            },
            "bindings": {
                "disabled": {"<-": "!@start.disabled"}
            }
        },

        "serialConsole": {
            "prototype": "blue-shark/ui/button.reel",
            "properties": {
                "element": {"#": "serialConsole"},
                "value": "Console"
            },
            "bindings": {
                "disabled": {"<-": "@stop.disabled"}
            }
        },

        "webUI": {
            "prototype": "blue-shark/ui/button.reel",
            "properties": {
                "element": {"#": "webUI"},
                "value": "Web UI"
            },
            "bindings": {
                "classList.has('is-hidden')": {"<-": "!@owner.object.web_ui_url"},
                "disabled": {"<-": "@stop.disabled"}
            }
        },

        "validationController": {
            "prototype": "core/controller/validation-controller",
            "properties": {
                "fields": {
                }
            }
        },
        "inspector": {
            "prototype": "ui/inspectors/inspector.reel",
            "properties": {
                "element": {"#": "inspector"},
                "validationController": {"@": "validationController"},
                "canSave": true,
                "canRevert": true,
                "canDelete": true,
                "controller": {"@": "owner"}
            },
            "bindings": {
                "context": {"<-": "@owner.context"}
            }
        },

        "networkSection": {
            "prototype": "ui/controls/foldable-section.reel",
            "properties": {
                "element": {"#": "networkSection"},
                "title": "Network Settings"
            }
        },

        "advancedSection": {
            "prototype": "ui/controls/foldable-section.reel",
            "properties": {
                "element": {"#": "advancedSection"},
                "title": "Advanced"
            }
        },

        "name": {
            "prototype": "blue-shark/ui/field-text-input.reel",
            "properties": {
                "element": {"#": "name"},
                "label": "Names"
            },
            "bindings": {
                "value": {"<-": "@owner.object.names.join(' ')"}
            }
        },

        "version": {
            "prototype": "blue-shark/ui/field-text.reel",
            "properties": {
                "element": {"#": "version"},
                "label": "Version"
            },
            "bindings": {
                "value": {"<-": "@owner.object.version"}
            }
        },

        "image": {
            "prototype": "blue-shark/ui/field-text.reel",
            "properties": {
                "element": {"#": "image"},
                "label": "Image"
            },
            "bindings": {
                "value": {"<-": "@owner.object.image"}
            }
        },

        "memoryLimit": {
            "prototype": "blue-shark/ui/field-text-input.reel",
            "properties": {
                "element": {"#": "memoryLimit"},
                "label": "Memory Limit"
            },
            "bindings": {
                "value": {"<->": "@owner.object.memory_limit"}
            }
        },

        "hostname": {
            "prototype": "blue-shark/ui/field-text-input.reel",
            "properties": {
                "element": {"#": "hostname"},
                "label": "Hostname"
            },
            "bindings": {
                "value": {"<->": "@owner.object.hostname"}
            }
        },

        "host": {
            "prototype": "blue-shark/ui/field-text.reel",
            "properties": {
                "element": {"#": "host"},
                "label": "Host"
            },
            "bindings": {
                "value": {"<-": "@owner._dockerHosts.filter{id == @owner.object.host}.one().name"}
            }
        },

        "exposePorts": {
            "prototype": "blue-shark/ui/field-checkbox.reel",
            "properties": {
                "element": {"#": "exposePorts"},
                "label": "Expose Ports"
            },
            "bindings": {
                "checked": {"<-": "!!@owner.object.expose_ports"}
            }
        },

        "command": {
            "prototype": "blue-shark/ui/field-text-input.reel",
            "properties": {
                "element": {"#": "command"},
                "label": "Command"
            },
            "bindings": {
                "value": {"<-": "@owner.object.command.join(' ')"}
            }
        },

        "environment": {
            "prototype": "ui/sections/containers/controls/table-environment.reel",
            "properties": {
                "element": {"#": "environment"}
            },
            "bindings": {
                "inspector": {"<-": "@inspector"},
                "values": {"<-": "@owner.environments"}
            }
        },

        "ports": {
            "prototype": "ui/sections/containers/controls/table-port.reel",
            "properties": {
                "element": {"#": "ports"}
            },
            "bindings": {
                "inspector": {"<-": "@inspector"},
                "values": {"<-": "@owner.object.ports.map{{ host_port: host_port, container_port: container_port, protocol: protocol }}"}
            }
        },

        "volumes": {
            "prototype": "ui/sections/containers/controls/table-volume.reel",
            "properties": {
                "element": {"#": "volumes"}
            },
            "bindings": {
                "inspector": {"<-": "@inspector"},
                "values": {"<-": "@owner.object.volumes.map{{ host_path: host_path, container_path: container_path, readonly: readonly , isLocked: isLocked }}"}
            }
        },

        "autostart": {
            "prototype": "blue-shark/ui/field-checkbox.reel",
            "properties": {
                "element": {"#": "autostart"},
                "label": "Start at Boot"
            },
            "bindings": {
                "checked": {"<->": "@owner.object.autostart"}
            }
        },

        "interactive": {
            "prototype": "blue-shark/ui/field-checkbox.reel",
            "properties": {
                "element": {"#": "interactive"},
                "label": "Interactive"
            },
            "bindings": {
                "checked": {"<->": "@owner.interactive"}
            }
        },

        "privileged": {
            "prototype": "blue-shark/ui/field-checkbox.reel",
            "properties": {
                "element": {"#": "privileged"},
                "label": "Privileged"
            },
            "bindings": {
                "checked": {"<->": "@owner.object.privileged"}
            }
        },

        "primaryNetworkMode": {
            "prototype": "blue-shark/ui/field-select.reel",
            "properties": {
                "element": {"#": "primaryNetworkMode"},
                "label": "Primary Network Mode"
            },
            "bindings": {
                "options": {"<-": "@owner.primaryNetWorkModes"},
                "selectedValue": {"<->": "@owner.object.primary_network_mode"}
            }
        },

        "bridgeDHCP": {
            "prototype": "blue-shark/ui/field-checkbox.reel",
            "properties": {
                "element": {"#": "bridgeDHCP"},
                "label": "DHCP"
            },
            "bindings": {
                "checked": {"<->": "@owner.object.bridge.dhcp"},
                "classList.has('hide')": {"<-": "@owner.object.primary_network_mode != 'BRIDGED'"}
            }
        },

        "bridgeAddress": {
            "prototype": "blue-shark/ui/field-text-input.reel",
            "properties": {
                "element": {"#": "bridgeAddress"},
                "label": "IP address"
            },
            "bindings": {
                "value": {"<->": "@owner.object.bridge.address"},
                "disabled": {"<-": "@bridgeDHCP.checked"},
                "classList.has('hide')": {"<-": "@owner.object.primary_network_mode != 'BRIDGED'"}
            }
        },

        "bridgeMacAddress": {
            "prototype": "ui/controls/field-mac-address.reel",
            "properties": {
                "element": {"#": "bridgeMacAddress"},
                "label": "MAC address"
            },
            "bindings": {
                "value": {"<->": "@owner.object.bridge.macaddress"},
                "classList.has('hide')": {"<-": "@owner.object.primary_network_mode != 'BRIDGED'"}
            }
        },

        "networks": {
            "prototype": "blue-shark/ui/field-select-multiple.reel",
            "properties": {
                "element": {"#": "networks"},
                "label": "Networks"
            },
            "bindings": {
                "options": {"<-": "@owner._networks.map{{ label: name, value: id }}"},
                "selectedValues": {"<->": "@owner.object.networks"}
            }
        },

        "logs": {
            "prototype": "ui/controls/inspector-option.reel",
            "properties": {
                "element": {"#": "logs"},
                "name": "Logs"
            },
            "bindings": {
                "context": {"<-": "@owner.context"},
                "object": {"<-": "@owner._dockerContainerLogs"},
                "classList.has('is-hidden')": {"<-": "@owner.object.interactive"}
            }
        },

        "readme": {
            "prototype": "ui/controls/inspector-option.reel",
            "properties": {
                "element": {"#": "readme"},
                "objectType": "VmReadme",
                "name": "Readme",
                "path": "readme"
            }
        }

    }
    </script>
</head>
<body>
    <div data-montage-id="owner" class="ContainerEditor">
        <div data-montage-id="inspector">
            <div class="g-margin-bottom">
                <div data-montage-id="start"></div>
                <div data-montage-id="restart"></div>
                <div data-montage-id="stop"></div>
                <div data-montage-id="serialConsole"></div>
                <div data-montage-id="webUI"></div>
            </div>

            <div data-montage-id="image"></div>
            <div data-montage-id="name"></div>
            <div data-montage-id="version"></div>
            <div data-montage-id="host"></div>

            <div data-montage-id="exposePorts"></div>
            <div data-montage-id="ports" class="g-margin-bottom">
                <div></div>
            </div>
            <div data-montage-id="volumes" class="g-margin-bottom">
                <div></div>
            </div>
            <div data-montage-id="environment" class="g-margin-bottom">
                <div></div>
            </div>
            <div data-montage-id="interactive"></div>
            <div data-montage-id="privileged"></div>
            <div data-montage-id="autostart"></div>
            <div data-montage-id="command"></div>

            <div data-montage-id="networkSection">
                <div data-montage-id="primaryNetworkMode"></div>
                <div data-montage-id="bridgeDHCP"></div>
                <div data-montage-id="bridgeAddress"></div>
                <div data-montage-id="bridgeMacAddress"></div>
                <div data-montage-id="networks"></div>
            </div>

            <div data-montage-id="advancedSection">
                <div data-montage-id="hostname"></div>
                <div data-montage-id="memoryLimit"></div>
            </div>

            <div data-montage-id="logs"></div>
            <div data-montage-id="readme"></div>
        </div>
    </div>
</body>
</html>
